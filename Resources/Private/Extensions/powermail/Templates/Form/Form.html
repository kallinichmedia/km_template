{namespace vh=In2code\Powermail\ViewHelpers}
<f:layout name="Default"/>

Render Powermail Form
{form}            All Forms with their Pages and their Fields
{ttContentData}        All values from content element with plugin


<f:section name="main">
    <f:alias map="{flashMessageClass:'powermail_message_error'}">
        <f:render partial="Misc/FlashMessages" arguments="{_all}"/>
    </f:alias>


    <f:if condition="{form}">
        <f:then>         

            
            <f:if condition="{ttContentData.layout} == 40 || {ttContentData.layout} == 41 || {ttContentData.layout} == 43 || {ttContentData.layout} == 61 || {ttContentData.layout} == 62 ">
                <f:then>
                    <f:form
                    action="{action}"
                    section="c{ttContentData.uid}"
                    name="field"
                    enctype="multipart/form-data"
                    additionalAttributes="{vh:validation.enableJavascriptValidationAndAjax(form:form)}"
                    addQueryString="{settings.misc.addQueryString}"
                    class="powermail_form powermail_form_{form.uid} {form.css} {settings.styles.framework.formClasses} {vh:misc.morestepClass(activate:settings.main.moresteps)}">
    
            
                    <f:render partial="Misc/FormError" arguments="{_all}"/>
    
                    <f:if condition="{settings.main.moresteps}">
                        <div class="btn-group">
                            <f:for each="{form.pages}" as="page" iteration="iterationPages">
                                <button class="btn btn-default{f:if(condition:iterationPages.isFirst,then:' btn-primary')}" type="button" data-powermail-morestep-current="{iterationPages.index}" data-powermail-morestep-show="{iterationPages.index}">{page.title}</button>
                            </f:for>
                        </div>
                    </f:if>
                    <div class="inner">
                        <f:if condition="{ttContentData.layout} == 61">
                          <div class="spacer">&nbsp;</div>
                        </f:if>
                        <f:for each="{form.pages}" as="page" iteration="iterationPages">
                            <f:render partial="Form/Page" arguments="{_all}"/>
                        </f:for>
                    </div>
    
                    <f:form.hidden name="mail[form]" value="{form.uid}" class="powermail_form_uid"/>
                    <f:render partial="Misc/HoneyPod" arguments="{form:form}"/>
                    </f:form>
                 
                </f:then>
                <f:else>
                    <f:form
                        action="{action}"
                        section="c{ttContentData.uid}"
                        name="field"
                        enctype="multipart/form-data"
                        additionalAttributes="{vh:validation.enableJavascriptValidationAndAjax(form:form)}"
                        addQueryString="{settings.misc.addQueryString}"
                        class="powermail_form powermail_form_{form.uid} {form.css} {settings.styles.framework.formClasses} {vh:misc.morestepClass(activate:settings.main.moresteps)}">
        
                        <f:if condition="{form.css} != 'nolabel'">
                            <h3>{form.title}</h3>
                        </f:if>
                        <f:render partial="Misc/FormError" arguments="{_all}"/>
        
                        <f:if condition="{settings.main.moresteps}">
                            <div class="btn-group">
                                <f:for each="{form.pages}" as="page" iteration="iterationPages">
                                    <button class="btn btn-default{f:if(condition:iterationPages.isFirst,then:' btn-primary')}" type="button" data-powermail-morestep-current="{iterationPages.index}" data-powermail-morestep-show="{iterationPages.index}">{page.title}</button>
                                </f:for>
                            </div>
                        </f:if>
        
                        <div class="powermail_fieldsets">                    
                            <f:for each="{form.pages}" as="page" iteration="iterationPages">
                                <f:render partial="Form/Page" arguments="{_all}"/>
                            </f:for>
                        </div>
        
                        <f:form.hidden name="mail[form]" value="{form.uid}" class="powermail_form_uid"/>
                        <f:render partial="Misc/HoneyPod" arguments="{form:form}"/>
                    </f:form>

                    <f:if condition="{ttContentData.layout} == 42">
                        <div class="resultbox hidden">

                            <div class="databox">
                                <h5>Dein Topzins:</h5>                                                            

                                <div class="logoblock">
                                    <img class="anbieterlogo" src="https://www.europace2.de/produktanbieter-logos/logo/COMMERZBANK.svg" alt="COMMERZBANK" title="COMMERZBANK"
                                    style="max-width: 50px;">
                                    <span class="value-anbietername"><h5>COMMERZBANK</h5></span>
                                </div>

                                <div class="valuesbox">

                                    <dl>
                                        <dt>Sollzins</dt>
                                        <dd class="value-sollzins">3.66%</dd>
                                    </dl>
                                    <dl>
                                        <dt>Effektivzins</dt>
                                        <dd class="value-effektivzins">3.75%</dd>
                                    </dl>
                                    <dl>
                                        <dt>Rate monatlich</dt>
                                        <dd class="value-rateMonatlich">1415 €</dd>
                                    </dl>
                                </div>
                            </div>

                            <div class="buttonbox">
                                <button class="gotback">Anpassen</button>


                               <f:link.typolink class="gotoservice" parameter="t3://page?uid=4#2col-130">
                                <svg id="conversation" xmlns="http://www.w3.org/2000/svg" width="65.805" height="65.805" viewBox="0 0 65.805 65.805">
                                    <g id="Gruppe_1633" data-name="Gruppe 1633" transform="translate(0 22.363)">
                                      <g id="Gruppe_1632" data-name="Gruppe 1632">
                                        <path id="Pfad_1241" data-name="Pfad 1241" d="M44.47,192.636a1.285,1.285,0,0,0-1.285,1.285v8.868a6.434,6.434,0,0,1-6.426,6.426H22.882A1.285,1.285,0,0,0,21.6,210.5l0,2.555-3.068-3.068a1.286,1.286,0,0,0-1.179-.772H9A6.434,6.434,0,0,1,2.57,202.79V183A6.434,6.434,0,0,1,9,176.571H21.978a1.285,1.285,0,0,0,0-2.57H9a9.007,9.007,0,0,0-9,9V202.79a9.007,9.007,0,0,0,9,9H16.69l5.279,5.279a1.285,1.285,0,0,0,2.194-.908l0-4.371H36.758a9.007,9.007,0,0,0,9-9v-8.868A1.285,1.285,0,0,0,44.47,192.636Z" transform="translate(0 -174)" fill="#fff"/>
                                      </g>
                                    </g>
                                    <g id="Gruppe_1635" data-name="Gruppe 1635" transform="translate(25.191)">
                                      <g id="Gruppe_1634" data-name="Gruppe 1634">
                                        <path id="Pfad_1242" data-name="Pfad 1242" d="M217.933,0h-3.253a18.68,18.68,0,1,0,0,37.361h3.253a18.716,18.716,0,0,0,4.741-.608l4.805,4.8a1.285,1.285,0,0,0,2.194-.909V33.211a18.859,18.859,0,0,0,4.91-6.054,18.479,18.479,0,0,0,2.03-8.476A18.7,18.7,0,0,0,217.933,0Zm9.681,31.557a1.286,1.286,0,0,0-.512,1.027v4.961L223.958,34.4a1.285,1.285,0,0,0-1.286-.319,16.114,16.114,0,0,1-4.738.708h-3.253a16.11,16.11,0,1,1,0-32.22h3.253a16.11,16.11,0,0,1,9.681,28.987Z" transform="translate(-196)" fill="#fff"/>
                                      </g>
                                    </g>
                                    <g id="Gruppe_1637" data-name="Gruppe 1637" transform="translate(40.416 9.005)">
                                      <g id="Gruppe_1636" data-name="Gruppe 1636">
                                        <path id="Pfad_1243" data-name="Pfad 1243" d="M325.331,75.122a5.454,5.454,0,0,0-5.045-5.045,5.4,5.4,0,0,0-4.1,1.45,5.461,5.461,0,0,0-1.729,3.978,1.285,1.285,0,1,0,2.57,0,2.871,2.871,0,0,1,3.077-2.864,2.871,2.871,0,0,1,.425,5.665,2.432,2.432,0,0,0-1.916,2.384v3.088a1.285,1.285,0,1,0,2.57,0V80.793A5.413,5.413,0,0,0,325.331,75.122Z" transform="translate(-314.462 -70.063)" fill="#fff"/>
                                      </g>
                                    </g>
                                    <g id="Gruppe_1639" data-name="Gruppe 1639" transform="translate(44.572 26.519)">
                                      <g id="Gruppe_1638" data-name="Gruppe 1638">
                                        <path id="Pfad_1244" data-name="Pfad 1244" d="M348.994,206.707a1.286,1.286,0,1,0,.377.909A1.295,1.295,0,0,0,348.994,206.707Z" transform="translate(-346.8 -206.33)" fill="#fff"/>
                                      </g>
                                    </g>
                                    <g id="Gruppe_1641" data-name="Gruppe 1641" transform="translate(6.94 39.843)">
                                      <g id="Gruppe_1640" data-name="Gruppe 1640">
                                        <path id="Pfad_1245" data-name="Pfad 1245" d="M82.4,310H55.285a1.285,1.285,0,0,0,0,2.57H82.4a1.285,1.285,0,0,0,0-2.57Z" transform="translate(-54 -310)" fill="#fff"/>
                                      </g>
                                    </g>
                                    <g id="Gruppe_1643" data-name="Gruppe 1643" transform="translate(34.059 47.04)">
                                      <g id="Gruppe_1642" data-name="Gruppe 1642">
                                        <path id="Pfad_1246" data-name="Pfad 1246" d="M267.194,366.377a1.284,1.284,0,1,0,.377.909A1.295,1.295,0,0,0,267.194,366.377Z" transform="translate(-265 -366)" fill="#fff"/>
                                      </g>
                                    </g>
                                    <g id="Gruppe_1645" data-name="Gruppe 1645" transform="translate(6.94 47.04)">
                                      <g id="Gruppe_1644" data-name="Gruppe 1644">
                                        <path id="Pfad_1247" data-name="Pfad 1247" d="M77.349,366H55.285a1.285,1.285,0,1,0,0,2.57H77.349a1.285,1.285,0,1,0,0-2.57Z" transform="translate(-54 -366)" fill="#fff"/>
                                      </g>
                                    </g>
                                    <g id="Gruppe_1647" data-name="Gruppe 1647" transform="translate(6.94 32.645)">
                                      <g id="Gruppe_1646" data-name="Gruppe 1646">
                                        <path id="Pfad_1248" data-name="Pfad 1248" d="M74.05,254H55.285a1.285,1.285,0,0,0,0,2.571H74.05a1.285,1.285,0,0,0,0-2.571Z" transform="translate(-54 -254)" fill="#fff"/>
                                      </g>
                                    </g>
                                  </svg>
                                  
                                    <span>Beraten lassen</span>
                               </f:link.typolink>
                            </div>
                        </div>
                    </f:if> <!-- END Layout 42 -->

                    <f:if condition="{ttContentData.layout} == 52">

                          <div class="resultbox hidden">

                            <div class="databox">
                              <div class="row1">
                                <h5>Dein Topzins:</h5>                                                            
                                <button class="gotback" title="Angaben anpassen">
                                  <svg version="1.1" id="Ebene_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                            viewBox="0 0 75 76" style="enable-background:new 0 0 75 76;" xml:space="preserve">
                          
                                          <g>
                                            <g>
                                              <path  d="M70.4,4.2C65.7-0.3,58.2,0,53.7,4.6l-5.2,5.2c-1.6,1.6-1.6,4.1,0,5.6l11,11c1.6,1.6,4.1,1.6,5.6,0l5.5-5.5
                                                C75.2,16.3,75.1,8.8,70.4,4.2z"/>
                                              <path class="st0" d="M55.5,30.4l-11-11c-1.6-1.6-4.1-1.6-5.6,0L13.1,45.1c-1.2,1.2-2.2,2.7-3,4.3l-9,20c-1.1,3.1,1.9,6,5,4.8
                                                l19.5-9.6c1.4-0.7,2.7-1.6,3.8-2.7L55.5,36C57,34.5,57,31.9,55.5,30.4z"/>
                                            </g>
                                            <path  d="M68.1,75h-30c-2.6,0-4.7-2.1-4.7-4.7v0c0-2.6,2.1-4.7,4.7-4.7h30c2.6,0,4.7,2.1,4.7,4.7v0
                                              C72.8,72.9,70.7,75,68.1,75z"/>
                                          </g>
                                      </svg>

                                </button>

                              </div>

                                <div class="logoblock">
                                    <img class="anbieterlogo" src="https://www.europace2.de/produktanbieter-logos/logo/COMMERZBANK.svg" alt="COMMERZBANK" title="COMMERZBANK"
                                    style="max-width: 50px;">
                                    <span class="value-anbietername"><h5>COMMERZBANK</h5></span>
                                </div>

                                <div class="valuesbox">

                                    <dl>
                                        <dt>Sollzins</dt>
                                        <dd class="value-sollzins">3.66%</dd>
                                    </dl>
                                    <dl>
                                        <dt>Effektivzins</dt>
                                        <dd class="value-effektivzins">3.75%</dd>
                                    </dl>
                                    <dl>
                                        <dt>Rate monatlich</dt>
                                        <dd class="value-rateMonatlich">1415 €</dd>
                                    </dl>
                                </div>
                            </div>

                            <div class="buttonbox">
                                
                              <div>
                                <span class="text">Willst Du mehr Infos?</span>
                                <!-- Button modal-->
                                <button class="km-modal-trigger" data-target="modal-councelling">
                                  <span>Lass dich beraten</span>
                                  <svg class="chevron" xmlns="http://www.w3.org/2000/svg" width="29" height="29" viewBox="0 0 29 29">
                                    <g id="Gruppe_327" data-name="Gruppe 327" transform="translate(0 29) rotate(-90)">						 
                                      <g id="Gruppe_116" data-name="Gruppe 116" transform="translate(21.783 5.262) rotate(90)">
                                        <path id="Pfad_58" data-name="Pfad 58" d="M0,0H9.6V9.6" transform="translate(6.788) rotate(45)" fill="none" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path>
                                      </g>
                                    </g>
                                  </svg>
                                </button>
                              </div>  
                              
                              
                              <div>
                                <span class="text">Du willst es detaillierter?</span>
                                <button class="km-modal-trigger" data-target="modal-compare">
                                  <span>Jetzt Angebote vergleichen</span>
                                  <svg class="chevron" xmlns="http://www.w3.org/2000/svg" width="29" height="29" viewBox="0 0 29 29">
                                    <g id="Gruppe_327" data-name="Gruppe 327" transform="translate(0 29) rotate(-90)">						 
                                      <g id="Gruppe_116" data-name="Gruppe 116" transform="translate(21.783 5.262) rotate(90)">
                                        <path id="Pfad_58" data-name="Pfad 58" d="M0,0H9.6V9.6" transform="translate(6.788) rotate(45)" fill="none" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path>
                                      </g>
                                    </g>
                                  </svg>
                                </button>
                              </div>

                                
                            
                            </div>
                          </div>
                         
                    </f:if> <!-- END Layout 52 -->

                </f:else>
            </f:if>
       
        </f:then>
        <f:else>
            <f:translate key="error_no_form"/>
        </f:else>
    </f:if>

</f:section>

